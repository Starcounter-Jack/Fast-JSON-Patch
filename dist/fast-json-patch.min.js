/*! fast-json-patch, version: 4.0.0-rc.1 */
var jsonpatch=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=Object.prototype.hasOwnProperty;function i(e,t){return o.call(e,t)}function a(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);t=[];for(var n in e)i(e,n)&&t.push(n);return t}function p(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e,t){var r;for(var n in e)if(i(e,n)){if(e[n]===t)return p(n)+"/";if("object"==typeof e[n]&&""!=(r=s(e[n],t)))return p(n)+"/"+r}return""}function c(e,t){var r=[e];for(var n in t){var o="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==o&&r.push(n+": "+o)}return r.join("\n")}t.hasOwnProperty=i,t._objectKeys=a,t._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},t.isInteger=function(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0},t.escapePathComponent=p,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=s,t.getPath=function(e,t){if(e===t)return"/";var r=s(e,t);if(""===r)throw new Error("Object not found in root");return"/"+r},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){var o=a(t),i=o.length;for(r=0;r<i;r++)if(e(t[o[r]]))return!0}return!1};var u=function(e){function t(t,r,n,o,i){var a=this.constructor,p=e.call(this,c(t,{name:r,index:n,operation:o,tree:i}))||this;return p.name=r,p.index=n,p.operation=o,p.tree=i,Object.setPrototypeOf(p,a.prototype),p.message=c(t,{name:r,index:n,operation:o,tree:i}),p}return n(t,e),t}(Error);t.PatchError=u,t.PROTO_ERROR_MSG="JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README",t.isValidExtendedOpId=function(e){return"string"==typeof e&&e.length>=3&&0===e.indexOf("x-")},t._graftTree=function(e,t,r){if(0!==r.comps.length){var n=t,o=e,i="";if(1===r.comps.length)return i=r.comps[0],void("graft"===r.modType?n[i]=o[i]:Array.isArray(t)?n.splice(~~i,1):delete n[i]);for(var a=0;a<r.comps.length;a++){if(o=o[i=r.comps[a]],"graft"===r.modType&&void 0===n[i]){if(void 0===o)return;break}if(a===r.comps.length-2)break;n=n[i]}n[i]=o}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.JsonPatchError=n.PatchError,t.deepClone=n._deepClone;var o=new Map,i={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var o=p(r,this.path);o&&(o=n._deepClone(o));var i=s(r,{op:"remove",path:this.from}).removed;return s(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:o}},copy:function(e,t,r){var o=p(r,this.from);return s(r,{op:"add",path:this.path,value:n._deepClone(o)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:d(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},a={add:function(e,t,r){return n.isInteger(String(t))?e.splice(~~t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(~~t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:i.move,copy:i.copy,test:i.test,_get:i._get};function p(e,t){if(""==t)return e;var r={op:"_get",path:t};return s(e,r),r.value}function s(e,r,s,c,f,h){if(void 0===s&&(s=!1),void 0===c&&(c=!0),void 0===f&&(f=!0),void 0===h&&(h=0),s&&("function"==typeof s?s(r,0,e,r.path):u(r,0)),""===r.path){var l={newDocument:e};if("add"===r.op)return l.newDocument=r.value,l;if("replace"===r.op)return l.newDocument=r.value,l.removed=e,l;if("move"===r.op||"copy"===r.op)return l.newDocument=p(e,r.from),"move"===r.op&&(l.removed=e),l;if("test"===r.op){if(l.test=d(e,r.value),!1===l.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,r,e);return l.newDocument=e,l}if("remove"===r.op)return l.removed=e,l.newDocument=null,l;if("_get"===r.op)return r.value=e,l;if("x"===r.op){if(!(P=o.get(r.xid)))throw new t.JsonPatchError("Extended operation `xid` property is not a registered extended operation","OPERATION_X_OP_INVALID",h,r,e);var v=e,O=e;c||(O=v=n._deepClone(e));var _={newDocument:r.value};return!0===r.resolve&&void 0===(_=P.obj.call(r,O,"",v))?{newDocument:e}:_}if(s)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",h,r,e);return l}c||(e=n._deepClone(e));var w=(r.path||"").split("/"),E=(O=e,1),y=w.length,m=void 0,A=void 0,P=void 0,g=(v=e,void 0);if("x"===r.op){if(!(P=o.get(r.xid)))throw new t.JsonPatchError("Extended operation `xid` property is not a registered extended operation","OPERATION_X_OP_INVALID",h,r,e);v=O=n._deepClone(O)}var I=void 0;for(I="function"==typeof s?s:u;;){if((A=w[E])&&-1!=A.indexOf("~")&&(A=n.unescapePathComponent(A)),f&&("__proto__"==A||"prototype"==A&&E>0&&"constructor"==w[E-1]))throw new TypeError(n.PROTO_ERROR_MSG);if(s&&void 0===m&&(void 0===O[A]?m=w.slice(0,E).join("/"):E==y-1&&(m=r.path),void 0!==m&&I(r,0,e,m)),E++,Array.isArray(O)){if("x"===r.op&&!0!==r.resolve&&""===A)throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",h,r,e);if("-"===A)A=O.length,"x"===r.op&&(w[E-1]=A.toString(10),void 0===g&&(g=w.slice(0,E).join("/")));else if("x"===r.op&&"--"===A)A=O.length-1,w[E-1]=A.toString(10),void 0===g&&(g=w.slice(0,E).join("/"));else{if(s&&!n.isInteger(A))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",h,r,e);if(n.isInteger(A)&&(A=~~A,"x"===r.op&&!0!==r.resolve&&A>=O.length))throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",h,r,e)}if(E>=y){if("x"===r.op&&P){if("string"==typeof A&&0===A.length&&!r.resolve)return{newDocument:r.value};if(void 0===(_=P.arr.call(r,O,A,v)))return{newDocument:e};if(void 0!==_.removed&&!0===r.resolve)throw new t.JsonPatchError("Extended operation should not remove items while resolving undefined paths","OPERATION_X_AMBIGUOUS_REMOVAL",h,r,e);if(c){var T={modType:"graft",comps:void 0===g?w.slice(1,E):g.split("/").slice(1)};return void 0!==_.removed&&(T={modType:"prune",comps:w.slice(1,E)}),n._graftTree(_.newDocument,e,T),{newDocument:e}}return _}if(s&&"add"===r.op&&A>O.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",h,r,e);if(!1===(l=a[r.op].call(r,O,A,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,r,e);return l}}else if(E>=y){if("x"===r.op&&P){if(0===A.length&&!r.resolve)return{newDocument:r.value};if(void 0===(_=P.obj.call(r,O,A,v)))return{newDocument:e};if(c){T={modType:"graft",comps:void 0===g?w.slice(1,E):g.split("/").slice(1)};return void 0!==_.removed&&(T={modType:"prune",comps:w.slice(1,E)}),n._graftTree(_.newDocument,e,T),{newDocument:e}}return _}if(!1===(l=i[r.op].call(r,O,A,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,r,e);return l}if("x"===r.op&&P&&void 0===O[A]&&(void 0===g&&(g=w.slice(0,E).join("/")),!0===r.resolve&&(Array.isArray(e)&&n.isInteger(String(w[E]))?O[A]=new Array(1+~~w[E]):O[A]={})),O=O[A],s&&E<y&&(!O||"object"!=typeof O))throw new t.JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",h,r,e)}}function c(e,r,o,i,a){if(void 0===i&&(i=!0),void 0===a&&(a=!0),o&&!Array.isArray(r))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=n._deepClone(e));for(var p=new Array(r.length),c=0,u=r.length;c<u;c++)p[c]=s(e,r[c],o,!0,a,c),e=p[c].newDocument;return p.newDocument=e,p}function u(e,r,a,p){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,a);if("x"===e.op){if(!n.isValidExtendedOpId(e.xid))throw new t.JsonPatchError("Operation `xid` property is not present or invalid string","OPERATION_X_ID_INVALID",r,e,a);var s=o.get(e.xid);if(!s)throw new t.JsonPatchError("Extended operation `xid` property is not a registered extended operation","OPERATION_X_OP_INVALID",r,e,a);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,a);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,a);if("/"===e.path)throw new t.JsonPatchError("Operation `path` slash-only is ambiguous","OPERATION_PATH_UNRESOLVABLE",r,e,a);if(void 0!==e.args&&!Array.isArray(e.args))throw new t.JsonPatchError("Operation `args` property is not an array","OPERATION_X_ARGS_NOT_ARRAY",r,e,a);s.validator.call(e,e,r,a,p)}else{if(!i[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,a);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,a);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,a);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,a);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,a);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&n.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,a);if(a)if("add"==e.op){var c=e.path.split("/").length,u=p.split("/").length;if(c!==u+1&&c!==u)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,a)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==p)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,a)}else if("move"===e.op||"copy"===e.op){var d=f([{op:"_get",path:e.from,value:void 0}],a);if(d&&"OPERATION_PATH_UNRESOLVABLE"===d.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,a)}}}function f(e,r,o){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)c(n._deepClone(r),n._deepClone(e),o||!0);else{o=o||u;for(var i=0;i<e.length;i++)o(e[i],i,r,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}function d(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,i=Array.isArray(e),a=Array.isArray(t);if(i&&a){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!d(e[r],t[r]))return!1;return!0}if(i!=a)return!1;var p=Object.keys(e);if((n=p.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(p[r]))return!1;for(r=n;0!=r--;)if(!d(e[o=p[r]],t[o]))return!1;return!0}return e!=e&&t!=t}t.useExtendedOperation=function(e,r){if(!n.isValidExtendedOpId(e))throw new t.JsonPatchError("Extended operation `xid` has malformed id (MUST begin with `x-`)","OPERATION_X_ID_INVALID",void 0,e);if("function"!=typeof r.arr)throw new t.JsonPatchError("Extended operation config has invalid `arr` function","OPERATION_X_CONFIG_INVALID",void 0,e);if("function"!=typeof r.obj)throw new t.JsonPatchError("Extended operation config has invalid `obj` function","OPERATION_X_CONFIG_INVALID",void 0,e);if("function"!=typeof r.validator)throw new t.JsonPatchError("Extended operation config has invalid `validator` function","OPERATION_X_CONFIG_INVALID",void 0,e);o.set(e,Object.freeze(r))},t.hasExtendedOperation=function(e){if(!n.isValidExtendedOpId(e))throw new t.JsonPatchError("Extended operation `xid` has malformed id (MUST begin with `x-`)","OPERATION_X_ID_INVALID",void 0,e);return o.has(e)},t.unregisterAllExtendedOperations=function(){o.clear()},t.getValueByPointer=p,t.applyOperation=s,t.applyPatch=c,t.applyReducer=function(e,r,n){var o=s(e,r);if(!1===o.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",n,r,e);return o.newDocument},t.validator=u,t.validate=f,t._areEquals=d},function(e,t,r){var n=r(1);Object.assign(t,n);var o=r(3);Object.assign(t,o);var i=r(0);t.JsonPatchError=i.PatchError,t.deepClone=i._deepClone,t.escapePathComponent=i.escapePathComponent,t.unescapePathComponent=i.unescapePathComponent},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */
var n=r(0),o=r(1),i=new WeakMap,a=function(e){this.observers=new Map,this.obj=e},p=function(e,t){this.callback=e,this.observer=t};function s(e,t){void 0===t&&(t=!1);var r=i.get(e.object);c(r.value,e.object,e.patches,"",t),e.patches.length&&o.applyPatch(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function c(e,t,r,o,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var a=n._objectKeys(t),p=n._objectKeys(e),s=!1,u=p.length-1;u>=0;u--){var f=e[h=p[u]];if(!n.hasOwnProperty(t,h)||void 0===t[h]&&void 0!==f&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&r.push({op:"test",path:o+"/"+n.escapePathComponent(h),value:n._deepClone(f)}),r.push({op:"remove",path:o+"/"+n.escapePathComponent(h)}),s=!0):(i&&r.push({op:"test",path:o,value:e}),r.push({op:"replace",path:o,value:t}),!0);else{var d=t[h];"object"==typeof f&&null!=f&&"object"==typeof d&&null!=d&&Array.isArray(f)===Array.isArray(d)?c(f,d,r,o+"/"+n.escapePathComponent(h),i):f!==d&&(!0,i&&r.push({op:"test",path:o+"/"+n.escapePathComponent(h),value:n._deepClone(f)}),r.push({op:"replace",path:o+"/"+n.escapePathComponent(h),value:n._deepClone(d)}))}}if(s||a.length!=p.length)for(u=0;u<a.length;u++){var h=a[u];n.hasOwnProperty(e,h)||void 0===t[h]||r.push({op:"add",path:o+"/"+n.escapePathComponent(h),value:n._deepClone(t[h])})}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var r,o=function(e){return i.get(e)}(e);if(o){var c=function(e,t){return e.observers.get(t)}(o,t);r=c&&c.observer}else o=new a(e),i.set(e,o);if(r)return r;if(r={},o.value=n._deepClone(e),t){r.callback=t,r.next=null;var u=function(){s(r)},f=function(){clearTimeout(r.next),r.next=setTimeout(u)};"undefined"!=typeof window&&(window.addEventListener("mouseup",f),window.addEventListener("keyup",f),window.addEventListener("mousedown",f),window.addEventListener("keydown",f),window.addEventListener("change",f))}return r.patches=[],r.object=e,r.unobserve=function(){s(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(o,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",f),window.removeEventListener("keyup",f),window.removeEventListener("mousedown",f),window.removeEventListener("keydown",f),window.removeEventListener("change",f))},o.observers.set(t,new p(t,r)),r},t.generate=s,t.compare=function(e,t,r){void 0===r&&(r=!1);var n=[];return c(e,t,n,"",r),n}}]);